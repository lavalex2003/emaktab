# eMaktab for Home Assistant

интеграция Home Assistant для электронного дневника **emaktab.uz**.

## Возможности

- Получение данных школьного дня
- Нормализованные уроки:
  - предмет
  - тема
  - домашнее задание
  - оценка
- Расчёт среднего балла за день
- Поддержка нескольких детей
- Настройка через UI Home Assistant

## Установка

### Через HACS (рекомендуется)
1. Добавьте репозиторий как Custom Repository
2. Установите интеграцию **eMaktab**
3. Перезапустите Home Assistant

### Вручную
Скопируйте папку `emaktab` в config/custom_components/

## Настройка

1. Откройте **Настройки → Интеграции**
2. Нажмите **Добавить интеграцию**
3. Выберите **eMaktab**
4. Введите данные ребёнка:
   - логин
   - пароль
   - person_id
   - school_id

  Чтобы узнать person_id и school_id необходимо открыть сайт emaktab.uz, Войти в систему, откртыь DevTools, вкладка network установить филтр на fetch/XHR. Обновить страницу. Первый же запрос /links, в строке запроса и в теле ответа будет необходимын данные. 

Можно добавить несколько детей.

## Создаваемые сущности

### School Day
- Дата учебного дня
- Все уроки в нормализованном JSON

### Average Mark
- Средний балл за день
- `0`, если нет оценок или каникулы

### Update eMaktab Data
- Обновление данных сенсоров

## Примечания

- Интеграция использует неофициальные API eMaktab
- Возможны изменения со стороны сервиса
- Используйте на свой страх и риск

## Лицензия
MIT
